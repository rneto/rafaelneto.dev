<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Architecture and best practices for an Angular application | Rafael Neto</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/images/logo.png">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="/images/icons/icon-152x152.png">
    <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#d66056">
    <script async="true" src="https://www.googletagmanager.com/gtag/js?id=G-S8PRT356B6"></script>
    <script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-S8PRT356B6', { 'anonymize_ip': true });</script>
    <link rel="alternate" type="application/rss+xml" href="https://rafaelneto.dev/rss.xml" title="Rafael Neto RSS Feed">
    <meta name="description" content="In this article, you will find the proposal for a possible evolution of architecture concepts in an Angular application, which can be derived from the official Angular Style Guide.">
    <meta property="article:modified_time" content="2021-10-22T00:00:00.000Z">
    <meta property="article:published_time" content="2020-12-19T00:00:00.000Z">
    <meta property="og:site_name" content="Rafael Neto">
    <meta property="og:title" content="Architecture and best practices for an Angular application">
    <meta property="og:description" content="In this article, you will find the proposal for a possible evolution of architecture concepts in an Angular application, which can be derived from the official Angular Style Guide.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="/en/blog/architecture-best-practices-angular/">
    <meta name="twitter:title" content="Architecture and best practices for an Angular application">
    <meta name="twitter:description" content="In this article, you will find the proposal for a possible evolution of architecture concepts in an Angular application, which can be derived from the official Angular Style Guide.">
    <meta name="twitter:url" content="/en/blog/architecture-best-practices-angular/">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:label2" content="Filed under">
    <meta name="twitter:data2" content="Angular">
    <meta property="article:tag" content="Angular">
    <meta name="theme-color" content="#d66056">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/images/icons/icon-144x144">
    <meta name="msapplication-TileColor" content="#000000">
    <link href="https://rafaelneto.dev/blog/arquitectura-buenas-practicas-angular/" rel="canonical" />
    <link rel="preload" href="/assets/css/0.styles.bb0c19ce.css" as="style"><link rel="preload" href="/assets/js/app.ee019d85.js" as="script"><link rel="preload" href="/assets/js/4.35e6b205.js" as="script"><link rel="preload" href="/assets/js/1.801c1b6e.js" as="script"><link rel="preload" href="/assets/js/32.2e93f8ac.js" as="script"><link rel="preload" href="/assets/js/19.40f9e796.js" as="script"><link rel="prefetch" href="/assets/js/11.7f50e1d9.js"><link rel="prefetch" href="/assets/js/12.e5fcd202.js"><link rel="prefetch" href="/assets/js/13.89648ad6.js"><link rel="prefetch" href="/assets/js/14.c6a608cd.js"><link rel="prefetch" href="/assets/js/15.00d4c987.js"><link rel="prefetch" href="/assets/js/16.f0891c93.js"><link rel="prefetch" href="/assets/js/17.93778a3e.js"><link rel="prefetch" href="/assets/js/18.1468113e.js"><link rel="prefetch" href="/assets/js/2.ff0695d0.js"><link rel="prefetch" href="/assets/js/20.7c41a12f.js"><link rel="prefetch" href="/assets/js/21.fc80806c.js"><link rel="prefetch" href="/assets/js/22.40f1a2c2.js"><link rel="prefetch" href="/assets/js/23.099cf4dd.js"><link rel="prefetch" href="/assets/js/24.27062614.js"><link rel="prefetch" href="/assets/js/25.db00c68a.js"><link rel="prefetch" href="/assets/js/26.75eced52.js"><link rel="prefetch" href="/assets/js/27.141748c3.js"><link rel="prefetch" href="/assets/js/28.4a2b2f52.js"><link rel="prefetch" href="/assets/js/29.f700ec1a.js"><link rel="prefetch" href="/assets/js/3.51e60054.js"><link rel="prefetch" href="/assets/js/30.303c9639.js"><link rel="prefetch" href="/assets/js/31.61e0e098.js"><link rel="prefetch" href="/assets/js/33.7197ed8c.js"><link rel="prefetch" href="/assets/js/34.70cab748.js"><link rel="prefetch" href="/assets/js/35.a2938760.js"><link rel="prefetch" href="/assets/js/36.344d5f62.js"><link rel="prefetch" href="/assets/js/37.ccd6ef99.js"><link rel="prefetch" href="/assets/js/38.f747c3ac.js"><link rel="prefetch" href="/assets/js/39.0014b129.js"><link rel="prefetch" href="/assets/js/40.4bcb8f39.js"><link rel="prefetch" href="/assets/js/41.54d85b43.js"><link rel="prefetch" href="/assets/js/42.8116cd4c.js"><link rel="prefetch" href="/assets/js/43.6f3e70fc.js"><link rel="prefetch" href="/assets/js/44.d6d8abff.js"><link rel="prefetch" href="/assets/js/45.cd9babd6.js"><link rel="prefetch" href="/assets/js/46.cb867dfa.js"><link rel="prefetch" href="/assets/js/47.070d730e.js"><link rel="prefetch" href="/assets/js/48.0cdf0dc3.js"><link rel="prefetch" href="/assets/js/49.3c348071.js"><link rel="prefetch" href="/assets/js/5.d96a2b8c.js"><link rel="prefetch" href="/assets/js/50.70221375.js"><link rel="prefetch" href="/assets/js/51.4d3bfe99.js"><link rel="prefetch" href="/assets/js/52.290b62dd.js"><link rel="prefetch" href="/assets/js/53.bdead276.js"><link rel="prefetch" href="/assets/js/54.af6c538d.js"><link rel="prefetch" href="/assets/js/55.7aa7f892.js"><link rel="prefetch" href="/assets/js/56.fd25720a.js"><link rel="prefetch" href="/assets/js/57.dd9ffee0.js"><link rel="prefetch" href="/assets/js/58.a9fa94d5.js"><link rel="prefetch" href="/assets/js/59.b24205ab.js"><link rel="prefetch" href="/assets/js/6.fff243bb.js"><link rel="prefetch" href="/assets/js/60.c48f9f3c.js"><link rel="prefetch" href="/assets/js/61.6ae343dc.js"><link rel="prefetch" href="/assets/js/62.d5032578.js"><link rel="prefetch" href="/assets/js/63.0566b7b0.js"><link rel="prefetch" href="/assets/js/64.39f75b2c.js"><link rel="prefetch" href="/assets/js/65.cafbd489.js"><link rel="prefetch" href="/assets/js/66.d2dbf74b.js"><link rel="prefetch" href="/assets/js/67.08618c54.js"><link rel="prefetch" href="/assets/js/68.161678f2.js"><link rel="prefetch" href="/assets/js/69.788810b6.js"><link rel="prefetch" href="/assets/js/7.170b11d7.js"><link rel="prefetch" href="/assets/js/70.fbb3b202.js"><link rel="prefetch" href="/assets/js/71.a3d8b7aa.js"><link rel="prefetch" href="/assets/js/72.46d6c318.js"><link rel="prefetch" href="/assets/js/73.e99efe3a.js"><link rel="prefetch" href="/assets/js/74.fd9eaff7.js"><link rel="prefetch" href="/assets/js/75.6782e97d.js"><link rel="prefetch" href="/assets/js/76.06524762.js"><link rel="prefetch" href="/assets/js/77.aec65f81.js"><link rel="prefetch" href="/assets/js/78.d7ce09bc.js"><link rel="prefetch" href="/assets/js/79.28e1de1e.js"><link rel="prefetch" href="/assets/js/8.13e5b4ae.js"><link rel="prefetch" href="/assets/js/80.917ff461.js"><link rel="prefetch" href="/assets/js/81.745e410a.js"><link rel="prefetch" href="/assets/js/82.9ef78695.js"><link rel="prefetch" href="/assets/js/83.a4ce6c69.js"><link rel="prefetch" href="/assets/js/84.5c274b85.js"><link rel="prefetch" href="/assets/js/85.1991c579.js"><link rel="prefetch" href="/assets/js/86.bdab760b.js"><link rel="prefetch" href="/assets/js/vuejs-paginate.8d41f623.js">
    <link rel="stylesheet" href="/assets/css/0.styles.bb0c19ce.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="vuepress-theme-blog__global-layout"><section id="header-wrapper"><header id="header"><div class="header-wrapper"><div class="title"><a href="/" class="nav-link home-link">Rafael Neto </a></div> <div class="header-right-wrap"><ul class="nav"><li class="nav-item"><a href="/en/blog/" class="nav-link router-link-active">English</a></li><li class="nav-item"><a href="/blog/" class="nav-link">Blog</a></li><li class="nav-item"><a href="/tag/" class="nav-link">Tags</a></li></ul> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></div></header></section> <div id="mobile-header"><div class="mobile-header-bar"><div class="mobile-header-title"><a href="/" class="nav-link mobile-home-link">Rafael Neto </a> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></div> <div class="mobile-menu-wrapper"><hr class="menu-divider"> <ul class="mobile-nav"><li class="mobile-nav-item"><a href="/en/blog/" class="nav-link router-link-active">English</a></li><li class="mobile-nav-item"><a href="/blog/" class="nav-link">Blog</a></li><li class="mobile-nav-item"><a href="/tag/" class="nav-link">Tags</a></li> <li class="mobile-nav-item"><!----></li></ul></div></div></div> <div class="content-wrapper"><div id="vuepress-theme-blog__post-layout"><article itemscope="itemscope" itemtype="https://schema.org/BlogPosting" class="vuepress-blog-theme-content"><header><h1 itemprop="name headline" class="post-title">
        
      </h1> <div class="post-meta"><!----> <div class="post-meta-date"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg> <time pubdate itemprop="datePublished" datetime="2020-12-19T00:00:00.000Z">
      2020-12-19
    </time></div> <ul itemprop="keywords" class="post-meta-tags"><li class="post-tag" data-v-42ccfcd5><a href="/tag/Angular" data-v-42ccfcd5><span data-v-42ccfcd5>Angular</span></a></li></ul></div></header> <div itemprop="articleBody" class="content__default"><h1 id="architecture-and-best-practices-for-an-angular-application"><a href="#architecture-and-best-practices-for-an-angular-application" class="header-anchor">#</a> Architecture and best practices for an Angular application</h1> <!----> <div class="last-updated" data-v-63820702><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icon-tabler-pencil" data-v-63820702><path stroke="none" d="M0 0h24v24H0z" fill="none" data-v-63820702></path> <path d="M4 20h4l10.5 -10.5a1.5 1.5 0 0 0 -4 -4l-10.5 10.5v4" data-v-63820702></path> <line x1="13.5" y1="6.5" x2="17.5" y2="10.5" data-v-63820702></line></svg>
  Last modified  
  <time itemprop="dateModified" content="2021-10-22" data-v-63820702>
    2021-10-22
  </time></div> <p><a href="/blog/arquitectura-buenas-practicas-angular/">Español</a> | English</p> <p>In this article, you will find the proposal for a possible evolution of architecture concepts in an Angular application, which can be derived from the <a href="https://angular.io/guide/styleguide" target="_blank" rel="noopener noreferrer">official Angular Style Guide<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. For this purpose, I have defined a series of guidelines and best practices for planning and structuring our application with the goal of making it scalable.</p> <blockquote><p>Scalability in an Angular application involves supporting the increase in data size loaded in the application, which increases project complexity and size and is generally followed by longer loading times.</p></blockquote> <h2 id="application-structure"><a href="#application-structure" class="header-anchor">#</a> Application Structure</h2> <p>We will follow a module-oriented project structure. With this officially recommended approach, modules are clearly visible in the folder tree as separate directories, and each module contains all the files related to that specific module.</p> <div class="language- extra-class"><pre class="language-text"><code>app/
|- core/
   |- core.module.ts
   |- services/
      |- auth.service.ts
   |- core-routing.module.ts
   |- core.module.ts
   |- index.ts
|- feature1/
   |- components/
      |- component1/
         |- ...
         |- component1.component.ts
      |- component2/
         |- ...
      |- shared/
         |- ...
   |- models/
      |- ...
   |- services/
      |- ...
   |- feature1-routing.module.ts
   |- feature1.module.ts
   |- index.ts
|- feature2/
   |- ...
|- feature3/
   |- ...
|- shared/
   |- components/
      |- component1/
         |- ...
         |- component1.component.ts
      |- component2/
         |- ...
   |- models/
   |- pipes/
      |- pipe1.pipe.ts
   |- index.ts
   |- shared.module.ts
|- app-component.ts
|- app.module.ts
</code></pre></div><p>As we can see, there are threee main modules in the project:</p> <ul><li>AppModule_: is the main module of the application, responsible for its startup and the combination of other modules.</li> <li>CoreModule_: includes the basic functionalities of the application, mostly global services, which will be used throughout the application globally. It must not be imported by the application functionality modules.</li> <li><em>SharedModule</em>: is normally a set of components or services that will be reused in other modules of the application, but that are not applied globally in the application. It can be imported by the functionality modules.</li></ul> <p>The third of these modules is included in the so-called <a href="https://angular.io/guide/feature-modules" target="_blank" rel="noopener noreferrer">application functionality modules<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. These modules will be isolated from each other and will be located in specific directories under the root directory of the application.</p> <p>Functionality modules are classified into <a href="https://angular.io/guide/module-types" target="_blank" rel="noopener noreferrer">six types<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> with the objective of separating responsibilities into:</p> <ul><li><em>Domain</em>: provides a user experience dedicated to a particular application domain, such as editing a customer or placing an order.</li> <li><em>Router</em>: is the domain module that acts as the main component of the functionality and whose purpose is to route the user's navigation through the functionality. By definition, all lazy loading modules are routed functionality modules.</li> <li><em>Routing</em>: provides routing configuration for another module and separates routing concerns from its complementary module.</li> <li><em>Service</em>: provides utility services such as data access and messaging.</li> <li><em>Complement</em>: makes components, directives and other widgets available to external modules. Many third-party <em>UI</em> component libraries are plug-in modules (<em>widgets</em>).</li> <li><em>Shared</em>: allows reusing application parts such as directives, transformers (<em>pipes</em>) and components. It is the module that we commonly call <em>SharedModule</em>.</li></ul> <p>This structure allows the separation of responsibilities in a clear way, besides being the starting point for the implementation of the deferred loading of the application contents, a fundamental step for the preparation of a scalable architecture.</p> <h3 id="appmodule"><a href="#appmodule" class="header-anchor">#</a> AppModule</h3> <ul><li>This module occupies the root of the application folder and should contain only the most elementary.</li> <li>Its function is simply to start the Angular application and provide the output of the root path (<em>router-outlet</em>). <strong>This approach also leaves open the possibility of running multiple independent Angular applications through the same base URL.</strong></li> <li>It will import the <em>CoreModule</em> and <em>SharedModule</em> modules.</li></ul> <h3 id="coremodule"><a href="#coremodule" class="header-anchor">#</a> CoreModule</h3> <ul><li>Its purpose is to collect all the services that have to have a single instance in the application (<em>singleton</em> services) in a single module. This is the case for example of the authentication service or the user service.</li> <li>The <em>CoreModule</em> will be imported only in the <em>AppModule</em> module in order to reduce the complexity of this module and emphasize its role as a simple application orchestrator.</li></ul> <blockquote><p>How to make sure that <em>CoreModule</em> is only imported from the <em>AppModule</em>? By controlling it through its constructor.</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token function">constructor</span> <span class="token punctuation">(</span><span class="token parameter">@<span class="token function">Optional</span><span class="token punctuation">(</span><span class="token punctuation">)</span> @<span class="token function">SkipSelf</span><span class="token punctuation">(</span><span class="token punctuation">)</span> parentModule<span class="token operator">?</span><span class="token operator">:</span> CoreModule</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>parentModule<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span>
        <span class="token string">'CoreModule is already loaded. Import it in the AppModule only.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre></div><p><em>core.module.ts</em></p> <ul><li>Since Angular 6, the preferred way to create a <em>singleton</em> service is by indicating in the service itself, that it should be provided in the root of the application. To do this, the <em>providedIn</em> property must be set to <em>root</em> in the <em>@Injectable</em> decorator of the service. In this way, it is not necessary to explicitly indicate in the <em>providers</em> property of the <em>NgModule</em> decorator of <em>CoreModule</em> our <em>singleton</em> services.</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Injectable <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/core'</span><span class="token punctuation">;</span>

@<span class="token function">Injectable</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  providedIn<span class="token operator">:</span> <span class="token string">'root'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">AuthService</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre></div><p><em>auth.service.ts</em></p> <blockquote><p><strong>TIP ·</strong> We can enhance the reusability of <em>CoreModule</em> services and functionalities in other applications by creating a new <em>core</em> directory in the root of the application and moving each <em>CoreModule</em> functionality to a new module.</p></blockquote> <h3 id="sharedmodule"><a href="#sharedmodule" class="header-anchor">#</a> SharedModule</h3> <ul><li>All shared components, services and <em>pipelines</em> must be implemented in this module.</li> <li>You will not import or inject services or other features from the <em>CoreModule</em> or other features into your constructors.</li> <li>You may define services that should not be persistent.</li> <li>Your components must receive all data through attributes in the model of the component that uses them. All this is summarized in the fact that <em>SharedModule</em> has no dependency on the rest of our application.</li> <li>It is the module in which for example we should import and re-export the Angular Material components and the <em>CommonModule</em>, <em>FormsModule</em> and <em>FlexLayoutModule</em> modules.</li></ul> <blockquote><p><strong>TIP ·</strong> We can enhance the reuse of <em>SharedModule</em> interface components in other applications by creating a new <em>ui</em> directory in the root of the application and moving each group of <em>SharedModule</em> components to a new module.</p></blockquote> <h3 id="feature-modules"><a href="#feature-modules" class="header-anchor">#</a> Feature modules</h3> <ul><li>We will create multiple feature modules for each independent feature of our application.</li> <li>Feature modules should only import services from <em>CoreModule</em> or <em>SharedModule</em>, so if the <em>feature1</em> feature module needs to import a service from the <em>feature2</em> module, it will be necessary to move that service to the <em>CoreModule</em>.</li> <li>They may contain their own artifacts (services, interfaces or models among others) as long as they are unique to the module itself.</li> <li>It will allow us to make sure that changes in a feature cannot affect or interrupt the rest of our application.</li></ul> <h2 id="routing"><a href="#routing" class="header-anchor">#</a> Routing</h2> <p>Angular's router (<em><a href="https://angular.io/guide/router" target="_blank" rel="noopener noreferrer">Router<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></em>) allows navigation from one view to the next. In our case, we are not going to add routes to the root component (<em>AppComponent</em>), but when the application starts, the <em>CoreRoutingModule</em> (declared in <em>app/core/core-routing.module.ts</em>) will be activated and load the necessary components.</p> <blockquote><p><em>CoreModule</em> handles the root routing of the application, so in theory, we should be able to import a new <em>Core2Module</em> into <em>AppModule</em> which could represent a new version of the application and the implementation of this application would have no impact on the application running through <em>CoreModule</em>.</p></blockquote> <p>In <em>CoreRotingModule</em> the input paths to the functionality modules will be configured, within which the paths declared in the module itself will be used to navigate and display the content within the URL of the module itself.</p> <blockquote><p>Functionality modules are modules with their own routing and are created to separate and organize the different areas of the application. That is why they are loaded only once, either from the root routing or through deferred loading.</p></blockquote> <p>When the user navigates to a protected area of the application, the <em>AuthGuardService</em> of the <em>CoreModule</em> will check the <em>canActivate</em> conditions and will only load the module deferred if the user is authenticated.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> routes<span class="token operator">:</span> Routes <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    path<span class="token operator">:</span> <span class="token string">'feature1'</span><span class="token punctuation">,</span>
    <span class="token function-variable function">loadChildren</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./feature1/feature1.module'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">m</span> <span class="token operator">=&gt;</span> m<span class="token punctuation">.</span>Feature1Module<span class="token punctuation">)</span><span class="token punctuation">,</span>
    canActivate<span class="token operator">:</span> <span class="token punctuation">[</span>AuthGuardService<span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    path<span class="token operator">:</span> <span class="token string">'feature2'</span><span class="token punctuation">,</span>
    <span class="token function-variable function">loadChildren</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./feature2/feature2.module'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">m</span> <span class="token operator">=&gt;</span> m<span class="token punctuation">.</span>Feature2Module<span class="token punctuation">)</span><span class="token punctuation">,</span>
    pathMatch<span class="token operator">:</span> <span class="token string">'full'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
 <span class="token operator">...</span>
</code></pre></div><p><em>core-routing.module.ts</em></p> <h3 id="lazy-loading"><a href="#lazy-loading" class="header-anchor">#</a> Lazy loading</h3> <p>To avoid possible performance problems when loading the application, we will make use of the <em>lazy loading</em> pattern (<em><a href="https://angular.io/guide/lazy-loading-ngmodules" target="_blank" rel="noopener noreferrer">Lazy-Loading<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></em>), a capability built into Angular that allows postponing the loading of a particular part of the application until it is really needed.</p> <p>It is enough to correctly define the module paths, so that it points to a module file that will be loaded only when it is really needed.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> routes<span class="token operator">:</span> Routes <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token operator">...</span>
    <span class="token function-variable function">loadChildren</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./feature1/feature1.module'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">m</span> <span class="token operator">=&gt;</span> m<span class="token punctuation">.</span>Feature1Module<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token operator">...</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
 <span class="token operator">...</span>
</code></pre></div><p><em>core-routing.module.ts</em></p> <p>Thanks to the defined module structure, our functionality modules can be loaded in a deferred way once the application is initialized, which will greatly reduce the application startup time. In addition, when the application grows and more modules are added, the core package of the application and therefore its startup time will remain the same.</p> <h2 id="data-flow-and-component-types"><a href="#data-flow-and-component-types" class="header-anchor">#</a> Data flow and component types</h2> <p>In Angular, the preferred data flow is unidirectional where data flows from <em>top to bottom</em>, much easier to maintain and follow than bidirectional linking. Data flows from the primary parent component to the secondary child component and from the child component to the template.</p> <blockquote><p>The separation of component responsibilities into levels facilitates reuse, maintenance and validation (unit testing).</p></blockquote> <p>When it is necessary to structure components by levels, the following guidelines should be followed.</p> <ul><li><strong><em>N-level components</em></strong> <ul><li>They define the parts of the application that contain part of the logic, communication with services and cause side effects (such as service calls or status updates). It is the one that injects the service and uses it to obtain the data.</li> <li>They are the containers of the components to which the data will be transferred through their attributes.</li> <li>From the routing point of view, we could consider them as the input components of the routes of the module itself, so each component would be associated to a route of the module.</li> <li>Care should be taken to keep the number of components of this type as small as possible.</li></ul></li> <li><strong><em>Level N+1 components</em></strong> <ul><li>They are components with little or no logic.</li> <li>All the input data they need is passed through their <em>@Input</em> parameters.</li> <li>If the component wants to communicate outward, it must emit an event through the <em>@Output</em> attribute.</li> <li>The more components we have of this type the simpler the data flow will be and the easier it will be to work with.</li> <li>The change detection strategy for these components can be set to <a href="https://blog.mgechev.com/2017/11/11/faster-angular-applications-onpush-change-detection-immutable-part-1/" target="_blank" rel="noopener noreferrer"><em>onPush</em><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, which will trigger the change detection process for the component only when the input properties have been modified. This is an easy to implement and very efficient method for optimizing Angular applications.</li></ul></li></ul> <blockquote><p>If we manage to strike a balance between the right number of components and the single responsibility principle, the simpler the data flow will be and the easier it will be to work with.</p></blockquote> <h2 id="state-management"><a href="#state-management" class="header-anchor">#</a> State management</h2> <p>As a general rule, the state of the application is shared transversely throughout its architecture and its information affects multiple components and even screens at the same time. This is why state operations are often complex in an Angular application, where they can also be performed frequently.</p> <p>One of the ways to address these problems is to take advantage of application-wide unidirectional data flow. The Angular community has widely adopted the <em><a href="https://github.com/ngrx/platform" target="_blank" rel="noopener noreferrer">Redux<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></em> architecture pattern, originally created for <em>React</em> applications.</p> <p>The idea behind <em>[Redux</em> is that all application state is stored in a single <em><a href="https://ngrx.io/guide/store" target="_blank" rel="noopener noreferrer">store<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></em>, the object that represents the current state of the application. A <em>store</em> is immutable, it cannot be modified, every time a state needs to be changed, a new object has to be created.</p> <p>A single reference point for all the state of the application simplifies the problem of synchronization between different parts of the application. You don't have to look for a certain information in different modules or components, everything is available in the <em>store</em>.</p> <blockquote><p>If you want to have a centralized, simple and inexpensive storage solution, I also recommend you take a look at this other article I created about <a href="/en/blog/manage-state-angular-rxjs-behaviorsubject-observables-data-services/">Managing the state of an Angular application using RxJs BehaviorSubject for observable data services</a>.</p></blockquote> <h2 id="aliases-for-the-application-and-environment"><a href="#aliases-for-the-application-and-environment" class="header-anchor">#</a> Aliases for the application and environment</h2> <p>Using an alias for our application's folders and environments will allow us to perform imports in a cleaner and more consistent way throughout the evolution of our application.</p> <p>The use of an alias would allow us to simplify the way we perform our imports:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> AuthService <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../../../.../core/services/auth.service'</span><span class="token punctuation">;</span>

<span class="token punctuation">[</span>vs<span class="token punctuation">]</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> AuthService <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@app/core'</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>IMPORTANT:</strong> The following technique should be used with extreme caution. I have encountered execution errors in some complex application by abusing it, due to the order of the artifact exports in the <em>index.ts</em> files (which we will see later), as well as by the inclusion in them of files that caused circular dependencies (such as some modules).</p> <p>First we must configure the <em>baseUrl</em> and <em>paths</em> properties in our <em>tsconfig.json</em> file as follows (you will see that we are creating an alias for the whole application and another one for the <em>environments</em>):</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token operator">...</span>
  <span class="token string">&quot;compilerOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
    <span class="token string">&quot;baseUrl&quot;</span><span class="token operator">:</span> <span class="token string">&quot;src&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;paths&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;@app/*&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;app/*&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token string">&quot;@env/*&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;environments/*&quot;</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><em>tsconfig.json</em></p> <p>Next, we must add an <em>index.ts</em> file for each package (it will be named after the physical folder that contains it) that we want to import and within which we will export all the public entities that we want to include in that package.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token string">'./core.module'</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token string">'./services/auth-guard.service'</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token string">'./services/auth.service'</span><span class="token punctuation">;</span>
</code></pre></div><p><em>app/core/index.ts</em></p> <p>This file could be further simplified if we extrapolate the creation of <em>index.ts</em> files in the rest of our artifact folders.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token string">'./auth-guard.service'</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token string">'./auth.service'</span><span class="token punctuation">;</span>
</code></pre></div><p><em>app/core/services/index.ts</em></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token string">'./core.module'</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token string">'./services'</span><span class="token punctuation">;</span>
</code></pre></div><p><em>app/core/index.ts</em></p> <blockquote><p>In case VSCode does not recognize our aliases when using them in the <em>import</em>, we must restart our TypeScript server. To do this in VSCode press <em>Cmd/Ctrl + Shift + P</em>, type <em>Typescript: Restart TS Server</em> and press <em>Enter</em>.</p></blockquote> <h2 id="optimization-through-package-analysis"><a href="#optimization-through-package-analysis" class="header-anchor">#</a> Optimization through package analysis</h2> <p>An additional strategy to those already mentioned to increase the optimization of our Angular application is to perform the <a href="/en/blog/optimize-angular-analyzing-npm-packages-webpack/">npm packages analysis with webpack</a>.</p> <h2 id="sass"><a href="#sass" class="header-anchor">#</a> Sass</h2> <p>I am in favor of setting <em><a href="https://sass-lang.com/" target="_blank" rel="noopener noreferrer">Sass<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></em> as the CSS styling preprocessor to use. In addition to the advantages of Sass, it allows us to integrate in a more effective way the official component library of Angular Material as well as its extensive customization capabilities.</p> <p>To do this, we must indicate it in the creation of the project:</p> <div class="language- extra-class"><pre class="language-text"><code>ng new scss-project --style=scss
</code></pre></div><p>Or set it in the default styles of an existing project:</p> <div class="language- extra-class"><pre class="language-text"><code>ng config schematics.@schematics/angular:component.styleext scss
</code></pre></div><p><em>@schematics/angular is the default schema for Angular CLI</em> <em>It will also be necessary to rename the extension of all css stylesheets to scss.</em></p> <h2 id="manual-compilation-for-production"><a href="#manual-compilation-for-production" class="header-anchor">#</a> Manual compilation for production</h2> <p>Given the production compilation limitations offered by default by <em>Angular CLI</em> in the <em>package.json</em> file, we must make a small customization in this file to be able to compile the application with specific options for production integration.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token operator">...</span>
  <span class="token string">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
    <span class="token string">&quot;build:prod&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ng build --prod --build-optimizer&quot;</span><span class="token punctuation">,</span>
    <span class="token operator">...</span>
  <span class="token punctuation">}</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span>
</code></pre></div><p><em>package.json</em></p> <p><em><a href="https://angular.io/cli/build" target="_blank" rel="noopener noreferrer">ng build<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></em></p> <h2 id="commits-and-changelog"><a href="#commits-and-changelog" class="header-anchor">#</a> Commits and changelog</h2> <p>To get a quick overview of what are the new features and bug fixes of the project, we should make use of the <em>CHANGELOG.md</em> file.</p> <p>As adding the changes manually to the file would be a tedious task, it is best to automate the process. In our case we are going to use the [<strong>standard-version</strong>] tool (https://github.com/conventional-changelog/standard-version).</p> <p>This tool automatically generates and updates the <em>CHANGELOG.md</em> file based on the <a href="https://conventionalcommits.org/" target="_blank" rel="noopener noreferrer">Conventional Commits<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> specification (based in turn on the <a href="https://github.com/angular/angular/blob/22b96b9/CONTRIBUTING.md#commit" target="_blank" rel="noopener noreferrer">Angular convention<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>), which indicates how to standardize the commits of all the modifications of our application and which correctly determines the new version of our project.</p> <p><em>Conventional Commits</em> defines the <code>type</code> (mandatory), the <code>scope</code> (optional), followed by the <code>confirmation message</code>. It is also possible to add <code>body</code> and <code>footer</code> (optional), both separated by a blank line.</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;type&gt;[optional scope]: &lt;description&gt;

[optional body]

[optional footer(s)]
</code></pre></div><p><em>format</em></p> <div class="language- extra-class"><pre class="language-text"><code>feat: allow provided config object to extend other configs

BREAKING CHANGE: `extends` key in config file is now used for extending other config files
</code></pre></div><p><em>example</em></p> <div class="language- extra-class"><pre class="language-text"><code>refactor!: drop support for Node 6
</code></pre></div><p><em>example</em></p> <div class="language- extra-class"><pre class="language-text"><code>docs: correct spelling of CHANGELOG
</code></pre></div><p><em>example</em></p> <div class="language- extra-class"><pre class="language-text"><code>feat(lang): add Spanish language
</code></pre></div><p><em>example</em></p> <div class="language- extra-class"><pre class="language-text"><code>fix: correct minor typos in code

see the issue for details

on typos fixed.

Reviewed-by: Z
Refs #133
</code></pre></div><p><em>example</em></p> <p><strong>Summary of types</strong></p> <ul><li><em>build</em>: Change affecting system compilation or external dependencies</li> <li><em>ci</em>: CI configuration changes</li> <li><em>docs</em>: Changes only in the documentation</li> <li><em>feat</em>: A new feature</li> <li><em>fix</em>: A bug fix</li> <li><em>perf</em>: A code change that improves performance</li> <li><em>refactor</em>: A code change that neither fixes a bug nor adds a feature</li> <li><em>style</em>: Changes that do not affect the meaning of the code (whitespace, formatting, a missing semicolon, etc.)</li> <li><em>test</em>: Adding missing tests or correcting existing tests</li></ul> <h2 id="angular-material"><a href="#angular-material" class="header-anchor">#</a> Angular Material</h2> <p><a href="https://material.angular.io/" target="_blank" rel="noopener noreferrer">Angular Material<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> is a web component library based on Material Design and created by the Angular team itself. Here I explain <a href="/en/blog/why-use-angular-material-design/">Why use Angular and Material Design</a>.</p> <h3 id="sidenav"><a href="#sidenav" class="header-anchor">#</a> Sidenav</h3> <p>The <em>sidenav</em> component is used to add content to the sides of a full screen application.</p> <p>The basic structure of the component usage is as follows:</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mat-sidenav-container</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mat-sidenav</span><span class="token punctuation">&gt;</span></span>Sidenav content<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mat-sidenav</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mat-sidenav-content</span><span class="token punctuation">&gt;</span></span>Main content<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mat-sidenav-content</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mat-sidenav-container</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="detection-of-scroll-event"><a href="#detection-of-scroll-event" class="header-anchor">#</a> Detection of <em>scroll</em> event</h4> <p>In case we want to detect the <em>scroll</em> event on the content of <em>mat-sidenav-content</em>, we should not add that node to the template since it will be generated automatically with the <em>cdkScrollable</em> directive already added to it. If you use <em>mat-sidenav-content</em> in your template, the <em>scrollable</em> object will be <em>undefined</em>.</p> <p>You also need to use the <em>AfterViewInit</em> event instead of <em>OnInit</em> to prevent the <em>scrollable</em> object from being <em>undefined</em>.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Component<span class="token punctuation">,</span> ViewChild<span class="token punctuation">,</span> AfterViewInit<span class="token punctuation">,</span> NgZone <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/core'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> MatSidenavContainer <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/material'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">SidenavComponent</span> <span class="token keyword">implements</span> <span class="token class-name">AfterViewInit</span> <span class="token punctuation">{</span>

  @<span class="token function">ViewChild</span><span class="token punctuation">(</span>MatSidenavContainer<span class="token punctuation">)</span> sidenavContainer<span class="token operator">:</span> MatSidenavContainer<span class="token punctuation">;</span>
  scrolledContent<span class="token operator">:</span> boolean <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">private</span> ngZone<span class="token operator">:</span> NgZone</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

  <span class="token function">ngAfterViewInit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>sidenavContainer<span class="token punctuation">.</span>scrollable<span class="token punctuation">.</span><span class="token function">elementScrolled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
      <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">onSidenavContainerScroll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">private</span> <span class="token function">onSidenavContainerScroll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> scrollTop <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>sidenavContainer<span class="token punctuation">.</span>scrollable<span class="token punctuation">.</span><span class="token function">getElementRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>nativeElement<span class="token punctuation">.</span>scrollTop <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>scrollTop <span class="token operator">&gt;</span> <span class="token number">10</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>scrolledContent <span class="token operator">===</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>ngZone<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>scrolledContent <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>scrollTop <span class="token operator">&lt;=</span> <span class="token number">10</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>scrolledContent <span class="token operator">===</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>ngZone<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>scrolledContent <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><p><em>sidevav.component.ts</em></p> <blockquote><p><a href="https://angular.io/api/core/NgZone" target="_blank" rel="noopener noreferrer">NgZone<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> allows us to run our work in the Angular zone. In the <em>sidevav.component.ts</em> example we use it so that a child component is notified that the <em>scrolledContent</em> variable has changed.</p></blockquote> <hr> <!----></div> <footer><!----> <hr> <!----></footer></article> <div class="sticker vuepress-toc"><div class="vuepress-toc-item vuepress-toc-h2 active"><a href="#application-structure" title="Application Structure">Application Structure</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#appmodule" title="AppModule">AppModule</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#coremodule" title="CoreModule">CoreModule</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#sharedmodule" title="SharedModule">SharedModule</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#feature-modules" title="Feature modules">Feature modules</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#routing" title="Routing">Routing</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#lazy-loading" title="Lazy loading">Lazy loading</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#data-flow-and-component-types" title="Data flow and component types">Data flow and component types</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#state-management" title="State management">State management</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#aliases-for-the-application-and-environment" title="Aliases for the application and environment">Aliases for the application and environment</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#optimization-through-package-analysis" title="Optimization through package analysis">Optimization through package analysis</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#sass" title="Sass">Sass</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#manual-compilation-for-production" title="Manual compilation for production">Manual compilation for production</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#commits-and-changelog" title="Commits and changelog">Commits and changelog</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#angular-material" title="Angular Material">Angular Material</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#sidenav" title="Sidenav">Sidenav</a></div></div></div></div> <footer class="footer" data-v-fdbf4940><div class="footer-left-wrap" data-v-fdbf4940><ul class="contact" data-v-fdbf4940><li class="contact-item" data-v-fdbf4940><a href="https://x.com/RNeto" target="_blank" rel="noopener noreferrer" class="nav-link external" data-v-fdbf4940><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-twitter" data-v-fdbf4940><path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z" data-v-fdbf4940></path></svg>
          
        </a></li></ul></div> <div class="footer-right-wrap" data-v-fdbf4940><ul class="copyright" data-v-fdbf4940><li class="copyright-item" data-v-fdbf4940><a href="/index.html" class="nav-link" data-v-fdbf4940>Rafael Neto © 2025</a></li></ul></div></footer></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.ee019d85.js" defer></script><script src="/assets/js/4.35e6b205.js" defer></script><script src="/assets/js/1.801c1b6e.js" defer></script><script src="/assets/js/32.2e93f8ac.js" defer></script><script src="/assets/js/19.40f9e796.js" defer></script>
  </body>
</html>
