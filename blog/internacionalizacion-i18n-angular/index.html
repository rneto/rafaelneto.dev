<!DOCTYPE html>
<html lang="es-ES">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Internationalización (i18n) en Angular | Rafael Neto</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/images/logo.png">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="/images/icons/icon-152x152.png">
    <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#d66056">
    <script async="true" src="https://www.googletagmanager.com/gtag/js?id=G-S8PRT356B6"></script>
    <script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-S8PRT356B6', { 'anonymize_ip': true });</script>
    <link rel="alternate" type="application/rss+xml" href="https://rafaelneto.dev/rss.xml" title="Rafael Neto RSS Feed">
    <meta name="description" content="Un paso básico en prácticamente todos los proyectos es configurar un sistema que nos permita idiomatizar nuestra aplicación Angular. En ese sentido, el uso del sistema de internacionalización oficial de Angular ...">
    <meta property="article:published_time" content="2023-03-05T00:00:00.000Z">
    <meta property="og:site_name" content="Rafael Neto">
    <meta property="og:title" content="Internationalización (i18n) en Angular">
    <meta property="og:description" content="Un paso básico en prácticamente todos los proyectos es configurar un sistema que nos permita idiomatizar nuestra aplicación Angular. En ese sentido, el uso del sistema de internacionalización oficial de Angular ...">
    <meta property="og:type" content="website">
    <meta property="og:url" content="/blog/internacionalizacion-i18n-angular/">
    <meta name="twitter:title" content="Internationalización (i18n) en Angular">
    <meta name="twitter:description" content="Un paso básico en prácticamente todos los proyectos es configurar un sistema que nos permita idiomatizar nuestra aplicación Angular. En ese sentido, el uso del sistema de internacionalización oficial de Angular ...">
    <meta name="twitter:url" content="/blog/internacionalizacion-i18n-angular/">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:label2" content="Filed under">
    <meta name="twitter:data2" content="Angular, i18n">
    <meta property="article:tag" content="Angular">
    <meta name="theme-color" content="#d66056">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/images/icons/icon-144x144">
    <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/assets/css/0.styles.bb0c19ce.css" as="style"><link rel="preload" href="/assets/js/app.ee019d85.js" as="script"><link rel="preload" href="/assets/js/4.35e6b205.js" as="script"><link rel="preload" href="/assets/js/1.801c1b6e.js" as="script"><link rel="preload" href="/assets/js/73.e99efe3a.js" as="script"><link rel="prefetch" href="/assets/js/11.7f50e1d9.js"><link rel="prefetch" href="/assets/js/12.e5fcd202.js"><link rel="prefetch" href="/assets/js/13.89648ad6.js"><link rel="prefetch" href="/assets/js/14.c6a608cd.js"><link rel="prefetch" href="/assets/js/15.00d4c987.js"><link rel="prefetch" href="/assets/js/16.f0891c93.js"><link rel="prefetch" href="/assets/js/17.93778a3e.js"><link rel="prefetch" href="/assets/js/18.1468113e.js"><link rel="prefetch" href="/assets/js/19.40f9e796.js"><link rel="prefetch" href="/assets/js/2.ff0695d0.js"><link rel="prefetch" href="/assets/js/20.7c41a12f.js"><link rel="prefetch" href="/assets/js/21.fc80806c.js"><link rel="prefetch" href="/assets/js/22.40f1a2c2.js"><link rel="prefetch" href="/assets/js/23.099cf4dd.js"><link rel="prefetch" href="/assets/js/24.27062614.js"><link rel="prefetch" href="/assets/js/25.db00c68a.js"><link rel="prefetch" href="/assets/js/26.75eced52.js"><link rel="prefetch" href="/assets/js/27.141748c3.js"><link rel="prefetch" href="/assets/js/28.4a2b2f52.js"><link rel="prefetch" href="/assets/js/29.f700ec1a.js"><link rel="prefetch" href="/assets/js/3.51e60054.js"><link rel="prefetch" href="/assets/js/30.303c9639.js"><link rel="prefetch" href="/assets/js/31.61e0e098.js"><link rel="prefetch" href="/assets/js/32.2e93f8ac.js"><link rel="prefetch" href="/assets/js/33.7197ed8c.js"><link rel="prefetch" href="/assets/js/34.70cab748.js"><link rel="prefetch" href="/assets/js/35.a2938760.js"><link rel="prefetch" href="/assets/js/36.344d5f62.js"><link rel="prefetch" href="/assets/js/37.ccd6ef99.js"><link rel="prefetch" href="/assets/js/38.f747c3ac.js"><link rel="prefetch" href="/assets/js/39.0014b129.js"><link rel="prefetch" href="/assets/js/40.4bcb8f39.js"><link rel="prefetch" href="/assets/js/41.54d85b43.js"><link rel="prefetch" href="/assets/js/42.8116cd4c.js"><link rel="prefetch" href="/assets/js/43.6f3e70fc.js"><link rel="prefetch" href="/assets/js/44.d6d8abff.js"><link rel="prefetch" href="/assets/js/45.cd9babd6.js"><link rel="prefetch" href="/assets/js/46.cb867dfa.js"><link rel="prefetch" href="/assets/js/47.070d730e.js"><link rel="prefetch" href="/assets/js/48.0cdf0dc3.js"><link rel="prefetch" href="/assets/js/49.3c348071.js"><link rel="prefetch" href="/assets/js/5.d96a2b8c.js"><link rel="prefetch" href="/assets/js/50.70221375.js"><link rel="prefetch" href="/assets/js/51.4d3bfe99.js"><link rel="prefetch" href="/assets/js/52.290b62dd.js"><link rel="prefetch" href="/assets/js/53.bdead276.js"><link rel="prefetch" href="/assets/js/54.af6c538d.js"><link rel="prefetch" href="/assets/js/55.7aa7f892.js"><link rel="prefetch" href="/assets/js/56.fd25720a.js"><link rel="prefetch" href="/assets/js/57.dd9ffee0.js"><link rel="prefetch" href="/assets/js/58.a9fa94d5.js"><link rel="prefetch" href="/assets/js/59.b24205ab.js"><link rel="prefetch" href="/assets/js/6.fff243bb.js"><link rel="prefetch" href="/assets/js/60.c48f9f3c.js"><link rel="prefetch" href="/assets/js/61.6ae343dc.js"><link rel="prefetch" href="/assets/js/62.d5032578.js"><link rel="prefetch" href="/assets/js/63.0566b7b0.js"><link rel="prefetch" href="/assets/js/64.39f75b2c.js"><link rel="prefetch" href="/assets/js/65.cafbd489.js"><link rel="prefetch" href="/assets/js/66.d2dbf74b.js"><link rel="prefetch" href="/assets/js/67.08618c54.js"><link rel="prefetch" href="/assets/js/68.161678f2.js"><link rel="prefetch" href="/assets/js/69.788810b6.js"><link rel="prefetch" href="/assets/js/7.170b11d7.js"><link rel="prefetch" href="/assets/js/70.fbb3b202.js"><link rel="prefetch" href="/assets/js/71.a3d8b7aa.js"><link rel="prefetch" href="/assets/js/72.46d6c318.js"><link rel="prefetch" href="/assets/js/74.fd9eaff7.js"><link rel="prefetch" href="/assets/js/75.6782e97d.js"><link rel="prefetch" href="/assets/js/76.06524762.js"><link rel="prefetch" href="/assets/js/77.aec65f81.js"><link rel="prefetch" href="/assets/js/78.d7ce09bc.js"><link rel="prefetch" href="/assets/js/79.28e1de1e.js"><link rel="prefetch" href="/assets/js/8.13e5b4ae.js"><link rel="prefetch" href="/assets/js/80.917ff461.js"><link rel="prefetch" href="/assets/js/81.745e410a.js"><link rel="prefetch" href="/assets/js/82.9ef78695.js"><link rel="prefetch" href="/assets/js/83.a4ce6c69.js"><link rel="prefetch" href="/assets/js/84.5c274b85.js"><link rel="prefetch" href="/assets/js/85.1991c579.js"><link rel="prefetch" href="/assets/js/86.bdab760b.js"><link rel="prefetch" href="/assets/js/vuejs-paginate.8d41f623.js">
    <link rel="stylesheet" href="/assets/css/0.styles.bb0c19ce.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="vuepress-theme-blog__global-layout"><section id="header-wrapper"><header id="header"><div class="header-wrapper"><div class="title"><a href="/" class="nav-link home-link">Rafael Neto </a></div> <div class="header-right-wrap"><ul class="nav"><li class="nav-item"><a href="/en/blog/" class="nav-link">English</a></li><li class="nav-item"><a href="/blog/" class="nav-link router-link-active">Blog</a></li><li class="nav-item"><a href="/tag/" class="nav-link">Tags</a></li></ul> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></div></header></section> <div id="mobile-header"><div class="mobile-header-bar"><div class="mobile-header-title"><a href="/" class="nav-link mobile-home-link">Rafael Neto </a> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></div> <div class="mobile-menu-wrapper"><hr class="menu-divider"> <ul class="mobile-nav"><li class="mobile-nav-item"><a href="/en/blog/" class="nav-link">English</a></li><li class="mobile-nav-item"><a href="/blog/" class="nav-link router-link-active">Blog</a></li><li class="mobile-nav-item"><a href="/tag/" class="nav-link">Tags</a></li> <li class="mobile-nav-item"><!----></li></ul></div></div></div> <div class="content-wrapper"><div id="vuepress-theme-blog__post-layout"><article itemscope="itemscope" itemtype="https://schema.org/BlogPosting" class="vuepress-blog-theme-content"><header><h1 itemprop="name headline" class="post-title">
        
      </h1> <div class="post-meta"><!----> <div class="post-meta-date"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg> <time pubdate itemprop="datePublished" datetime="2023-3-5">
      2023-03-05
    </time></div> <ul itemprop="keywords" class="post-meta-tags"><li class="post-tag" data-v-42ccfcd5><a href="/tag/Angular" data-v-42ccfcd5><span data-v-42ccfcd5>Angular</span></a></li><li class="post-tag" data-v-42ccfcd5><a href="/tag/i18n" data-v-42ccfcd5><span data-v-42ccfcd5>i18n</span></a></li></ul></div></header> <div itemprop="articleBody" class="content__default"><h1 id="internationalizacion-i18n-en-angular"><a href="#internationalizacion-i18n-en-angular" class="header-anchor">#</a> Internationalización (i18n) en Angular</h1> <!----> <p>Español | <a href="/en/blog/angular-internationalization-i18n/">English</a></p> <p>Un paso básico en prácticamente todos los proyectos es configurar un sistema que nos permita idiomatizar nuestra aplicación. En ese sentido, el uso del sistema de internacionalización oficial de Angular nos permite estar más alineados con la evolución natural de Angular. Dicho sistema, basado en la generación de las traducciones en tiempo de compilación, crea tantas versiones de nuestra aplicación como diferentes idiomas hayamos definido, por lo que no necesitaremos un servicio de traducción o diccionario especial, simplemente tendremos los textos finales en la aplicación.</p> <p>Cuando hablamos de traducciones en tiempo de compilación, Angular reemplaza cada texto marcado con el texto de traducción correspondiente del archivo de traducción. Este proceso se ejecuta una vez para cada idioma, por lo que finalmente terminaremos con un paquete de aplicación compuesto por varios paquetes, uno para cada idioma.</p> <p>Tengamos en cuenta las ventajas de este sistema:</p> <ol><li>Más rendimiento porque no hay un diccionario de traducción cargado en memoria en tiempo de ejecución.</li> <li>Más rendimiento porque no es necesario traducir el texto de cada aplicación en cada evento de detección de cambio de aplicación.</li> <li>Mejor mantenibilidad por la mejor experiencia de desarrollo en la forma de usarlo.</li> <li>Mejor mantenibilidad por utilizar un formato de archivo bien extendido como es XLIFF.</li></ol> <p>Y la principal desventaja:</p> <ol><li>Recarga de la aplicación al cambiar el idioma.</li></ol> <p>Este sistema incluye varios pasos básicos:</p> <ul><li>Configuración inicial.</li> <li>Localización del contenido de la aplicación para formateo o extracción.</li> <li>Extracción de texto para traducciones.</li> <li>Generación de archivos de traducción.</li> <li>Construcción de un proyecto idiomatizado.</li></ul> <blockquote><p>Si quieres conocer las diferentes opciones existentes a la hora de idiomatizar una aplicación Angular, te recomiendo que le eches un vistazo a este otro artículo que he creado sobre las <a href="/blog/mejores-alternativas-internacionalizacion-i18n-angular/">Mejores alternativas para la internationalización (i18n) en Angular</a>.</p></blockquote> <h2 id="configuracion-inicial"><a href="#configuracion-inicial" class="header-anchor">#</a> Configuración inicial</h2> <p>El primer paso es instalar las dependencias necesarias utilizando Angular CLI:</p> <p><code>ng add @angular/localize</code></p> <p>Esto añadirá el paquete <em>@angular/localize</em> y cargará la función <code>$localize</code> en el ámbito global.</p> <p>Angular utiliza <em>Unicode locale ID</em> para establecer la configuración regional (<em>localize</em> en inglés, de ahí que a veces use la expresión <em>localizar</em>) de los datos, siendo su valor por defecto <em>en-US</em>. Si no, se puede especificar a través de la propiedad <em>sourceLocale</em> en el archivo <em>angular.json</em>.</p> <h2 id="localizacion-del-contenido-de-la-aplicacion-para-formateo-o-extraccion"><a href="#localizacion-del-contenido-de-la-aplicacion-para-formateo-o-extraccion" class="header-anchor">#</a> Localización del contenido de la aplicación para formateo o extracción</h2> <p>El siguiente paso es preparar nuestro contenido para ser transformado de la forma correcta utilizando el idioma y la configuración regional basados en el <em>LOCALE_ID</em> y para ser extraído y ser traducido externamente.</p> <p>Para mostrar nuestros datos en el formato correcto contamos con <a href="https://angular.io/guide/pipes" target="_blank" rel="noopener noreferrer"><em>Angular pipes</em><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> que nos permite transformarlos en base a la configuración idiomática que hayamos establecido:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span><span class="token punctuation">{</span> myDateTime <span class="token operator">|</span> date<span class="token operator">:</span><span class="token string">'shortTime'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token comment">// will be '5:15 PM' for 'en-US' and '17:15' for 'en-GB'</span>
<span class="token punctuation">{</span><span class="token punctuation">{</span> myAmount <span class="token operator">|</span> number <span class="token punctuation">}</span><span class="token punctuation">}</span>  <span class="token comment">// will be '2,138.62' for 'es' and '2 138,62' for 'fr'</span>
</code></pre></div><p>Para preparar nuestro contenido para ser extraído tenemos que utilizar el atributo <em>i18n</em> y la función <em>$localize</em> para marcar nuestras cadenas de texto como traducibles.</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">i18n</span><span class="token punctuation">&gt;</span></span>Text to translate.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ng-container</span> <span class="token attr-name">i18n</span><span class="token punctuation">&gt;</span></span>Text to translate.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ng-container</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">[src]</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>image.png<span class="token punctuation">&quot;</span></span> <span class="token attr-name">i18n-title</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Image title<span class="token punctuation">&quot;</span></span> <span class="token attr-name">i18n-alt</span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Image alt<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre></div><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">private</span> myText<span class="token operator">:</span> $localize <span class="token string">'Text to translate'</span><span class="token punctuation">;</span>
<span class="token keyword">private</span> myText<span class="token operator">:</span> $localize <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Text to translate </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>variable<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
</code></pre></div><h2 id="extraccion-de-texto-para-traducciones"><a href="#extraccion-de-texto-para-traducciones" class="header-anchor">#</a> Extracción de texto para traducciones</h2> <p>Después de preparar nuestro contenido para ser extraído, debemos utilizar Angular CLI para extraer a un archivo de traducciones base todas las cadenas marcadas. En este caso, crearé una nueva carpeta <em>locale</em> durante el proceso de generación dentro de la cual se creará un nuevo archivo <em>messages.xlf</em> con todos los textos marcados de nuestra aplicación.</p> <p><code>ng extract-i18n --output-path src/locale</code></p> <h3 id="actualizar-el-archivo-de-traduccion-base"><a href="#actualizar-el-archivo-de-traduccion-base" class="header-anchor">#</a> Actualizar el archivo de traducción base</h3> <ol><li>Realizamos los cambios en la aplicación.</li> <li>Ejecutamos <code>ng extract-i18n --output-path src/locale</code> para actualizar el archivo <em>messages.xlf</em>.</li></ol> <h2 id="generacion-de-archivos-de-traduccion"><a href="#generacion-de-archivos-de-traduccion" class="header-anchor">#</a> Generación de archivos de traducción</h2> <p>Es hora de crear y traducir cada archivo de configuración regional utilizando un editor de archivos XLIFF o crearlo y editarlo nosotros mismos:</p> <ol><li>Hacemos una copia del archivo de idioma fuente (<em>messages.xlf</em> por defecto) en la misma carpeta <em>locale</em> y lo renombramos con cada localización requerida (<em>message.{locale}.xlf</em>).</li> <li>Añadimos un atributo <em>target-language</em> al nodo <em>file</em> con el código de localización, por ejemplo <em>target-language=&quot;es&quot;</em>.</li> <li>Buscamos el primer nodo <em>trans-unit</em>.</li> <li>Duplicamos el nodo hijo <em>source</em> y le cambiamos el nombre a <em>target</em>.</li> <li>Traducimos el contenido del nodo <em>target</em>.</li> <li>Repitimos los mismos pasos anteriores con cada nodo <em>trans-unit</em>.</li></ol> <p>Para ayudarnos a gestionar los archivos de traducción podemos utilizar la extensión <a href="https://marketplace.visualstudio.com/items?itemName=rvanbekkum.xliff-sync" target="_blank" rel="noopener noreferrer">XLIFF Sync<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> y usamos el comando <em>Create New Target File(s)</em> para configurar el entorno de proyecto para la extensión.</p> <h3 id="anadir-nuevas-configuraciones-regionales"><a href="#anadir-nuevas-configuraciones-regionales" class="header-anchor">#</a> Añadir nuevas configuraciones regionales</h3> <ol><li>Hacemos una copia del archivo del idioma de origen y lo renombramos con la configuración regional requerida o utilizamos la extensión XLIFF Sync (<em>Create New Target File(s)</em>) para crear un nuevo archivo de destino (un nuevo idioma alternativo).</li> <li>Cambiamos el archivo <em>angular.json</em> para añadir la nueva configuración regional a la sección <em>projects -&gt; Your.Project.Name -&gt; i18n -&gt; locales</em>. <strong>Hablaré de esta sección más adelante.</strong></li></ol> <h3 id="gestion-de-los-archivos-de-traduccion"><a href="#gestion-de-los-archivos-de-traduccion" class="header-anchor">#</a> Gestión de los archivos de traducción</h3> <ul><li>Utilizamos la extensión XLIFF Sync (comando <em>Synchronize Translation Units</em>) para sincronizar todas las unidades de traducción entre el archivo base y todos los idiomas alternativos.</li> <li>Podemos editar los archivos de destino manualmente o si utilizamos un servicio externo (por ejemplo, https://smartcat.com/) para traducirlos, y luego utilizar la extensión XLIFF Sync (comando <em>Import Translations from File(s)</em>) para copiar las traducciones de los archivos seleccionados a los archivos de destino con el mismo idioma (recordemos comprobar los atributos de archivo <em>source-language</em> y <em>target-language</em> del archivo de traducción de origen para asegurarse de que funciona correctamente).</li></ul> <h2 id="construccion-de-un-proyecto-idiomatizado"><a href="#construccion-de-un-proyecto-idiomatizado" class="header-anchor">#</a> Construcción de un proyecto idiomatizado</h2> <p>Lo primero que tenemos que hacer es definir todas las configuraciones regionales soportadas utilizando la propiedad <em>i18n</em> del proyecto en el archivo <em>angular.json</em>:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  <span class="token property">&quot;projects&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;my-app&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// ...</span>
      <span class="token property">&quot;i18n&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;sourceLocale&quot;</span><span class="token operator">:</span> <span class="token string">&quot;en-US&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;locales&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;es&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;translation&quot;</span><span class="token operator">:</span> <span class="token string">&quot;src/locale/messages.es.xlf&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;baseHref&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/es/&quot;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token property">&quot;pt&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;translation&quot;</span><span class="token operator">:</span> <span class="token string">&quot;src/locale/messages.pt.xlf&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;baseHref&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/pt/&quot;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token comment">// ...</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;architect&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// ...</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><p><em>angular.json</em></p> <p>Entonces podemos usar nuestra definición de configuración regional en la configuración de compilación para decidir qué localizaciones deben generarse durante el proceso de compilación. Para ello, debemos utilizar la opción <em>localize</em> de la sessión <em>build</em> del archivo <em>angular.json</em>:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  <span class="token property">&quot;projects&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;my-app&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// ...</span>
      <span class="token property">&quot;architect&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;builder&quot;</span><span class="token operator">:</span> <span class="token string">&quot;@angular-devkit/build-angular:browser&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;options&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;localize&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token property">&quot;i18nMissingTranslation&quot;</span><span class="token operator">:</span> <span class="token string">&quot;error&quot;</span><span class="token punctuation">,</span>
            <span class="token comment">// ...</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token property">&quot;configurations&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;production&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token comment">// ...</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token property">&quot;development&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token property">&quot;localize&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
              <span class="token comment">// ...</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token property">&quot;es&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token property">&quot;localize&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;es&quot;</span><span class="token punctuation">]</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token property">&quot;pt&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token property">&quot;localize&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;pt&quot;</span><span class="token punctuation">]</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token property">&quot;defaultConfiguration&quot;</span><span class="token operator">:</span> <span class="token string">&quot;production&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">// ...</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><p><em>angular.json</em></p> <p>Los valores admitidos para <em>localize</em> son:</p> <ul><li><em>true</em>, generará los paquetes para todas las configuraciones regionales definidas.</li> <li><em>false</em>, generará sólo el paquete del idioma de origen.</li> <li><em>[&quot;locale-id-1&quot;, &quot;locale-id-2&quot;, ...]</em>, generará sólo los paquetes de las localizaciones especificadas.</li></ul> <p><strong>Cuando se utiliza <em>ng server</em>, los únicos valores permitidos para la opción _localize son <em>false</em> y <em>[&quot;locale-id-1&quot;]</em> (matriz de un solo elemento)</strong>.</p> <p>Otra propiedad interesante para configurar en nuestro archivo <em>angular.json</em> es la opción de compilación <em>i18nMissingTranslation</em> con el valor <em>error</em> que lanza un error en la compilación cuando falta una traducción. El valor por defecto permite la compilación y sólo mensajes de advertencia sobre las traducciones.</p> <p>Por último, podemos añadir nuevas configuraciones de compilación para locales específicos y también utilizarlo para servir la aplicación en un idioma específico. Sólo hay que añadir nuevos pequeños cambios a nuestro archivo <em>angular.json</em>:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  <span class="token property">&quot;projects&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;my-app&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// ...</span>
      <span class="token property">&quot;architect&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token comment">// ...</span>
          <span class="token property">&quot;configurations&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token comment">// ...</span>
            <span class="token property">&quot;es&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token property">&quot;localize&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;es&quot;</span><span class="token punctuation">]</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token property">&quot;pt&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token property">&quot;localize&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;pt&quot;</span><span class="token punctuation">]</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token comment">// ...</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;serve&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token comment">// ...</span>
          <span class="token property">&quot;configurations&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token comment">// ...</span>
            <span class="token property">&quot;es&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token property">&quot;browserTarget&quot;</span><span class="token operator">:</span> <span class="token string">&quot;my-app:build:development,es&quot;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token property">&quot;pt&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token property">&quot;browserTarget&quot;</span><span class="token operator">:</span> <span class="token string">&quot;my-app:build:development,pt&quot;</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token comment">// ...</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">// ...</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><p><em>angular.json</em></p> <p>Y el script para ejecutar nuestra aplicación en el idioma específico:</p> <p><code>ng serve --configuration=es</code></p> <p><code>ng serve --configuration=pt</code></p> <blockquote><p><em>¿No cambia el idioma al depurar?</em> Cuando se utiliza la plantilla ASP.NET Core Angular podríamos tener problemas al ejecutar la aplicación localmente con <em>ng serve</em> modificando la configuración regional a mostrar. Después de ejecutar la aplicación por primera vez y apagarla usando Ctrl+C, si reiniciamos la aplicación después de cambiar la configuración <em>localize</em> a otro <em>locale ID</em>, el proceso anterior (Node.js connection listener) seguirá vivo y deberemos pararlo manualmente para ver tu aplicación en el nuevo <em>localize</em>. Para parar el proceso anterior utilizamos la respuesta que se ajuste a nuestro sistema y puerto según esta pregunta de Stack Overflow <em><a href="https://stackoverflow.com/questions/39091735/port-4200-is-already-in-use-when-running-the-ng-serve-command" target="_blank" rel="noopener noreferrer">&quot;Port 4200 is already in use&quot; when running the ng serve command<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></em>. Puedes encontrar más información sobre cómo las instancias de Node.js continúan ejecutándose después de depurar ASP.NET Core en el tema <em><a href="https://github.com/dotnet/aspnetcore/issues/38897" target="_blank" rel="noopener noreferrer">38897<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></em> de GitHub.</p></blockquote> <p>Aquí hay un <a href="https://stackblitz.com/edit/angular-i18n-demo-rneto" target="_blank" rel="noopener noreferrer">proyecto básico de demostración con internacionalización Angular<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> en Stackblitz.</p> <h3 id="enrutamiento-de-aplicaciones"><a href="#enrutamiento-de-aplicaciones" class="header-anchor">#</a> Enrutamiento de aplicaciones</h3> <p>Por último al generar nuestra aplicación, si <em>my-app</em> es el directorio que contiene los ficheros del proyecto, al generar múltiples idiomas, se generarán tantos subdirectorios como configuraciones regionales hayamos establecido. Por ejemplo, la versión en español de <em>my-app</em> estará en el directorio <em>my-app/es</em>.</p> <p>Una vez generada y desplegada la aplicación, ésta se encargará de enrutar al usuario al directorio específico de cada idioma en función de la configuración de enrutamiento especificada en la propiedad <em>baseHref</em> de nuestro archivo <em>angular.json</em> para cada configuración regional.</p> <p>Por defecto, los usuarios serán redirigidos al idioma indicado en la cabecera HTTP <em>Accept-Language</em> a menos que se acceda a la ruta de un idioma específico. En todos los demás casos en los que no se reciba información sobre el idioma, se utilizará el idioma por defecto de la aplicación.</p> <h3 id="utilizar-un-idioma-por-defecto-distinto-de-en-us"><a href="#utilizar-un-idioma-por-defecto-distinto-de-en-us" class="header-anchor">#</a> Utilizar un idioma por defecto distinto de en-US</h3> <p>Por defecto Angular usa <em>en-US</em> como configuración regional por defecto, así que necesitamos hacer algún cambio para reescribir la configuración por defecto usada en nuestra app.</p> <p>Para establecer la configuración regional de la aplicación a <em>es</em> (todos los textos de la plantilla los tenemos en español):</p> <ul><li>Establecemos el token <em>LOCALE_ID</em> a <em>es</em> en el archivo <em>app.module.ts</em> para propagar la configuración regional a través de la aplicación.</li> <li>Usamos la función <em>registerLocaleData</em> en el archivo <em>app.module.ts</em> para registrar la configuración regional que usará internamente Angular.</li> <li>Establecemos la propiedad <em>i18n\sourceLocale</em> a <em>es</em> en archivo <em>angular.json</em> para generar la aplicación sólo para esta configuración regional.</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> registerLocaleData <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/common'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> localeEs <span class="token keyword">from</span> <span class="token string">'@angular/common/locales/es'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">LOCALE_ID</span><span class="token punctuation">,</span> NgModule <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/core'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> BrowserModule <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/platform-browser'</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> AppComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./app.component'</span><span class="token punctuation">;</span>

@<span class="token function">NgModule</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  imports<span class="token operator">:</span> <span class="token punctuation">[</span>BrowserModule<span class="token punctuation">]</span><span class="token punctuation">,</span>
  declarations<span class="token operator">:</span> <span class="token punctuation">[</span>AppComponent<span class="token punctuation">]</span><span class="token punctuation">,</span>
  bootstrap<span class="token operator">:</span> <span class="token punctuation">[</span>AppComponent<span class="token punctuation">]</span><span class="token punctuation">,</span>
  providers<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> provide<span class="token operator">:</span> <span class="token constant">LOCALE_ID</span><span class="token punctuation">,</span> useValue<span class="token operator">:</span> <span class="token string">'es'</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">AppModule</span> <span class="token punctuation">{</span>
  <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">registerLocaleData</span><span class="token punctuation">(</span>localeEs<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><em>app.module.ts</em></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  <span class="token property">&quot;projects&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;my-app&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// ...</span>
      <span class="token property">&quot;i18n&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;sourceLocale&quot;</span><span class="token operator">:</span> <span class="token string">&quot;es&quot;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;architect&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// ...</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><p><em>angular.json</em></p> <hr> <!----></div> <footer><!----> <hr> <!----></footer></article> <div class="sticker vuepress-toc"><div class="vuepress-toc-item vuepress-toc-h2 active"><a href="#configuracion-inicial" title="Configuración inicial">Configuración inicial</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#localizacion-del-contenido-de-la-aplicacion-para-formateo-o-extraccion" title="Localización del contenido de la aplicación para formateo o extracción">Localización del contenido de la aplicación para formateo o extracción</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#extraccion-de-texto-para-traducciones" title="Extracción de texto para traducciones">Extracción de texto para traducciones</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#actualizar-el-archivo-de-traduccion-base" title="Actualizar el archivo de traducción base">Actualizar el archivo de traducción base</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#generacion-de-archivos-de-traduccion" title="Generación de archivos de traducción">Generación de archivos de traducción</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#anadir-nuevas-configuraciones-regionales" title="Añadir nuevas configuraciones regionales">Añadir nuevas configuraciones regionales</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#gestion-de-los-archivos-de-traduccion" title="Gestión de los archivos de traducción">Gestión de los archivos de traducción</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#construccion-de-un-proyecto-idiomatizado" title="Construcción de un proyecto idiomatizado">Construcción de un proyecto idiomatizado</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#enrutamiento-de-aplicaciones" title="Enrutamiento de aplicaciones">Enrutamiento de aplicaciones</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#utilizar-un-idioma-por-defecto-distinto-de-en-us" title="Utilizar un idioma por defecto distinto de en-US">Utilizar un idioma por defecto distinto de en-US</a></div></div></div></div> <footer class="footer" data-v-fdbf4940><div class="footer-left-wrap" data-v-fdbf4940><ul class="contact" data-v-fdbf4940><li class="contact-item" data-v-fdbf4940><a href="https://x.com/RNeto" target="_blank" rel="noopener noreferrer" class="nav-link external" data-v-fdbf4940><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-twitter" data-v-fdbf4940><path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z" data-v-fdbf4940></path></svg>
          
        </a></li></ul></div> <div class="footer-right-wrap" data-v-fdbf4940><ul class="copyright" data-v-fdbf4940><li class="copyright-item" data-v-fdbf4940><a href="/index.html" class="nav-link" data-v-fdbf4940>Rafael Neto © 2025</a></li></ul></div></footer></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.ee019d85.js" defer></script><script src="/assets/js/4.35e6b205.js" defer></script><script src="/assets/js/1.801c1b6e.js" defer></script><script src="/assets/js/73.e99efe3a.js" defer></script>
  </body>
</html>
